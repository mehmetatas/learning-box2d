package com.turpgames.physics;

import com.badlogic.gdx.physics.box2d.Body;
import com.badlogic.gdx.physics.box2d.World;
import com.turpgames.physics.box2d.builders.Box2DBuilders;

public class RopeJoint2 {
	public static void build(World world, Body bodyA, Body bodyB float x, float y, float length, int pieces) {
		float pieceLength = length / pieces;

		Body[] pieceBodies = new Body[pieces];
		for (int i = 0; i < pieces; i++) {
			pieceBodies[i] = Box2DBuilders.Body.newDynamicBodyBuilder()
					.setCenter(x, y * i + pieceLength)
					.build(world, Box2DBuilders.Fixture.newFixtureBuilder()
							.setDensity(0.1f)
							.setElasticity(1f)
							.setFriction(0.1f)
							.setShape(Box2DBuilders.Shape.newCircleBuilder().setRadius(0.001f).build()));

			if (i == 0){
				Box2DBuilders.Joint.newRopeJointBuilder()
				.setBodyA(bodyA)
				.setBodyA(pieceBodies[0])
				.setMaxLength(pieceLength)
				.build(world);
			}
			else{
				Box2DBuilders.Joint.newRopeJointBuilder()
						.setBodyA(pieceBodies[i - 1])
						.setBodyA(pieceBodies[i])
						.setMaxLength(pieceLength)
						.build(world);
			}
		}
		
		Box2DBuilders.Joint.newRopeJointBuilder()
		.setBodyA(pieceBodies[pieces - 1])
		.setBodyA(pieceBodies[0])
		.setMaxLength(pieceLength)
		.build(world);
	}
}
